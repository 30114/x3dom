<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:x3dext="http://philip.html5.org/x3d/ext"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<head>
<title>X3D-in-3D-canvas tests</title>
<style>
body { font-family: sans-serif; }
X3D { display: none; }
canvas { border: solid; float: left; margin-right: 1em; margin-bottom: 1em; }
p.case { clear: both; border-top: 1px solid #888; }
p.log { height: 10em; overflow: auto; white-space: -moz-pre-wrap; white-space: pre-wrap; font-size: x-small; }
</style>
</head>
<body>

<p>Current renderer: <span id="renderer">???</span>.</p>

<div>

<!--
<p class="case">
Basic stuff
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240" style="float: left">
<Scene>
    <x3dext:Inline DEF="inline2" url="monkeybox.x3d#OB_Cube"/>
    <Viewpoint centerOfRotation="0 0 0" position="7.481 5.344 6.508" orientation="-0.472 0.861 0.191 0.932" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>

<p class="case">
Basic stuff
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240" style="float: left">
<Scene>
    <x3dext:Inline DEF="inline2" url="monkeybox.x3d#OB_Cube"/>
    <Viewpoint centerOfRotation="0 0 0" position="0 0 5" orientation="1 0 0 0" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>
-->

<!--
<p class="case">
Boxes
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240">
<Scene>
    <Shape>
        <Appearance/>
        <Box/>
    </Shape>
    <Transform translation="4 0 0">
        <Shape>
            <Appearance/>
            <Box size="0.5 1 2"/>
        </Shape>
    </Transform>
    <Viewpoint centerOfRotation="0 0 0" position="0 0 15" orientation="0 1 0 0" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>

<p class="case">
Spheres
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240">
<Scene>
    <Shape>
        <Appearance>
            <Material diffuseColor="1 0 0"/>
        </Appearance>
        <Sphere/>
    </Shape>
    <Transform translation="4 0 0">
        <Shape>
            <Appearance>
                <Material diffuseColor="0 1 0"/>
            </Appearance>
            <Sphere radius="2"/>
        </Shape>
    </Transform>
    <Viewpoint centerOfRotation="0 0 0" position="0 0 15" orientation="0 1 0 0" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>
-->

<p class="case">
Materials
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240">
<Scene>
    <Transform translation="0 0 0">
        <Shape>
            <Appearance>
                <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
            </Appearance>
            <Sphere/>
        </Shape>
    </Transform>
    <Transform translation="2.5 0 0">
        <Shape>
            <Appearance>
                <Material diffuseColor="0 1 0"/>
            </Appearance>
            <Sphere/>
        </Shape>
    </Transform>
    <Viewpoint centerOfRotation="0 0 0" position="3 8 8" orientation="1 0 0 -0.7" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>

<p class="case" style="background: blue">
Text
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240">
<Scene>
    <Transform translation="0 1 -4">
        <Shape>
            <Appearance>
                <Material diffuseColor="1 1 1" emissiveColor="0.5 0.5 0.5"/>
            </Appearance>
            <Box size="8 4 1"/>
        </Shape>
    </Transform>
    <Transform scale="4 4 4">
        <Shape>
            <Appearance>
                <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
            </Appearance>
            <Text string='"Hello" "world"'>
                <FontStyle/>
            </Text>
        </Shape>
    </Transform>
    <Viewpoint centerOfRotation="0 0 0" position="0 0 15" orientation="0 1 0 0" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>

<p class="case">
Text
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240">
<Scene>
    <Transform translation="0 3 0">
        <Shape>
            <Appearance>
                <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
            </Appearance>
            <Text string='"Hello world"'>
                <FontStyle/>
            </Text>
        </Shape>
    </Transform>
    <Transform translation="0 1 0">
        <Shape>
            <Appearance>
                <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
            </Appearance>
            <Text string='"Hello world"'>
                <FontStyle family='"SANS"'/>
            </Text>
        </Shape>
    </Transform>
    <Transform translation="0 -1 0">
        <Shape>
            <Appearance>
                <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
            </Appearance>
            <Text string='"Hello world"'>
                <FontStyle family='"Comic Sans MS" "SANS"'/>
            </Text>
        </Shape>
    </Transform>
    <Transform translation="0 -3 0">
        <Shape>
            <Appearance>
                <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
            </Appearance>
            <Text string='"Hello world"'>
                <FontStyle family='"Blargh" "SANS" "SERIF"'/>
            </Text>
        </Shape>
    </Transform>
    <Viewpoint centerOfRotation="0 0 0" position="0 0 15" orientation="0 1 0 0" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>

<!--
<p class="case">
Orientation axis normalisation
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240">
<Scene>
    <x3dext:Inline DEF="inline2" url="monkeybox.x3d#OB_Cube"/>
    <Viewpoint centerOfRotation="0 0 0" position="0 3 3" orientation="3 0 0 -0.707" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>
-->

<!--
<p class="case">
Other stuff
<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="320" height="240">
<Scene>
    <Transform DEF="monkeyhead">
        <x3dext:Inline DEF="inline1" url="monkeybox.x3d#OB_Suzanne">
            <xsl:template match="x3d:Transform/@translation">
                <xsl:attribute name="translation">-4 2.5 0.2</xsl:attribute>
            </xsl:template>
            <xsl:template match="x3d:Appearance">
                <Appearance>
                    <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
                </Appearance>
            </xsl:template>
        </x3dext:Inline>
    </Transform>

    <x3dext:Inline DEF="inline2" url="monkeybox.x3d#OB_Cube">
        <xsl:template match="x3d:Appearance">
            <Appearance>
                <Material diffuseColor="1 0 0" specularColor="1 1 0"/>
            </Appearance>
        </xsl:template>
    </x3dext:Inline>

    <TimeSensor DEF="Clock" cycleInterval="4" loop="true"/>

    <OrientationInterpolator DEF="Nodder" key="0 0.5 1" keyValue="1 0 0 0, 1 0 0 -0.2, 1 0 0 0"/>
    <ROUTE fromNode="Clock" fromField="fraction_changed" toNode="Nodder" toField="set_fraction"/>
    <ROUTE fromNode="Nodder" fromField="value_changed" toNode="monkeyhead" toField="rotation"/>

    <OrientationInterpolator DEF="Spinner" key="0 0.5 1" keyValue="0 1 0 0, 0 1 0 3.1416, 0 1 0 6.2832"/>
    <ROUTE fromNode="Clock" fromField="fraction_changed" toNode="Spinner" toField="set_fraction"/>
    <ROUTE fromNode="Spinner" fromField="value_changed" toNode="inline2 OB_Cube" toField="rotation"/>

    <Viewpoint centerOfRotation="0 0 0" position="7.481 5.344 6.508" orientation="-0.472 0.861 0.191 0.932" fieldOfView="0.661"/>
</Scene>
</X3D>
</p>
-->

</div>

<script src="x3dsetup.js"/>
<script src="maths.js"/>
<script src="x3d.js"/>
<!--<script src="x3d_test.js"></script>-->
<script src="gfx_glweb20.js"/>
<script src="gfx_opera3d.js"/>

<script><![CDATA[

window.onload = function () {
    var x3ds = document.getElementsByTagNameNS('http://www.web3d.org/specifications/x3d-namespace', 'X3D');
    x3ds = Array.map(x3ds, function (n) { return n });
    for (var i = 0; i < x3ds.length; ++i)
        setupX3D(x3ds[i]);
}
]]></script>

</body>
</html>
