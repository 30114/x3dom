<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Runtime object example</title>
    <link rel="stylesheet" type="text/css" href="x3dom.css">
    <link rel='stylesheet' type='text/css' href='media/css/examples.css'>
	<script type="text/javascript" src="x3dom.js"></script>

	<style>
		ul.plain { float:left ; margin-left:1em; margin-bottom:2em; font-size:.9em;}
		ul.plain li { list-style:none;  margin-left:1em; white-space:nowrap}
	</style>

</head>
<body onLoad="init()">

    <div id="nav">
        <a href="http://www.x3dom.org/?page_id=5">Examples index</a>
    </div>
    <div class="content">      


    <h1><code>runtime</code> object example</h1>
    <p>This example demonstrates how to use the <tt>runtime</tt> API of the element. See the source of this file for how to use the API.</p>
	
    <x3d id="the_element" width="512px" height="512px">
    <scene>
           <viewpoint position='0 0 10' descrition="cam1"></viewpoint>
           <viewpoint position='-2 0 5' descrition="cam2"></viewpoint>
           <viewpoint position='0 2 5' descrition="cam3"></viewpoint>
           <viewpoint position='2 0 5' descrition="cam4"></viewpoint>
           <shape>
                <appearance>
                    <material diffuseColor='1 0 0' ></material>	
                </appearance>
                <box DEF='box' ></box>
            </shape>
    </scene>
    </x3d>

    	<ul class="plain">
		    <li><em>Viewpoint</em>
            	<ul>
		    		<li><a href="#" onClick="$element.runtime.nextView();return false;">Next view</a> [via <tt>runtime.nextView()</tt>]</li> 
			    	<li><a href="#" onClick="$element.runtime.getActiveBindable('X3DViewpointNode')._stack.switchTo('next');return false;">Next view</a> [via <tt>runtime.getActiveBindable()</tt>]</li> 
		    		<li><a href="#" onClick="$element.runtime.prevView();return false;">Prev view</a></li> 
			    	<li><a href="#" onClick="$element.runtime.resetView();return false;">Reset current view</a></li>
				    <li><a href="#" onClick="$element.runtime.uprightView();return false;">Upright View</a></li>
				    <li><a href="#" onClick="$element.runtime.showAll();return false;">Show all</a></li>
		    		<li><a href="#" onClick="$element.runtime.lightView();return false;">Light View</a></li> 
				</ul>
            </li>

		    <li><em>Pickmodes</em> (current: <span id="pick_mode_info"></span>)
	            <ul>
				    <li><a href="#" onClick="$element.runtime.changePickMode('idbuf');updatePickInfo();return false;">idbuf</a></li>
				    <li><a href="#" onClick="$element.runtime.changePickMode('color');updatePickInfo();return false;">color</a></li>
				    <li><a href="#" onClick="$element.runtime.changePickMode('textcoord');updatePickInfo();return false;">textcoord</a></li>
				    <li><a href="#" onClick="$element.runtime.changePickMode('box');updatePickInfo();return false;">box</a></li>
				</ul>
            </li>

   		    <li><em>Misc</em>
            	<ul>
	            	<li><a href="#" onClick="$element.runtime.togglePoints();return false;">Toggle points</a></li>
				    <li><a href="#" onClick="alert('Speed value: ' + $element.runtime.speed());return false;">Show speed</a></li>
				    <li><a href="#" onClick="$element.runtime.changeSpeed(10.0);return false;">Change speed to 10.0</a></li>
                </ul>
			</li>
   		    <li><em>Modes</em> (current: <span id="nav_mode_info"></span>)
            	<ul>
					<li><a href="#" onClick="$element.runtime.examine();updateNavInfo();return false;">examine</a></li>
                    <li><a href="#" onClick="$element.runtime.walk();updateNavInfo();return false;">walk</a></li>
                    <li><a href="#" onClick="$element.runtime.lookAt();updateNavInfo();return false;">look at</a></li>
                    <li><a href="#" onClick="$element.runtime.fly();updateNavInfo();return false;">fly</a></li>
				</ul>
			<li>
				<em>Debug</em>
            	<ul>
				    <li><a href="#" onClick="toggleDebug(this);">Show debug</a></li>
				    <li><a href="#" onClick="toggleStats(this);">Show stats</a></li>
    		    </ul>
            </li>
	    </ul>

	</div>

    <script>
	// simplify access to the X3D element
	var $element;
	var debug = false;
	var pick_mode_info;
	var nav_mode_info;

	function init() {
		$element = document.getElementById('the_element');
		updatePickInfo();
		updateNavInfo();
	}
	
	function updatePickInfo() {
		pick_mode_info = document.getElementById('pick_mode_info');
		pick_mode_info.innerHTML = $element.runtime.pickMode() + '/' + $element.runtime.pickMode({'internal':true});
	}

	function updateNavInfo() {
		nav_mode_info = document.getElementById('nav_mode_info');
		nav_mode_info.innerHTML = $element.runtime.navigationInfo()._vf.type[0];
	}

	
	function toggleStats(link) {
		stats = $element.runtime.statistics();
		if (stats) {
			$element.runtime.statistics(false);
			link.innerHTML = 'Show statistics';
		} else {
			$element.runtime.statistics(true);
			link.innerHTML = 'Hide statistics';
		}
	}
	
	function toggleDebug(link) {
		if (debug) {
			$element.runtime.hideDebug();
			link.innerHTML = 'Show debug';
		} else {
			$element.runtime.showDebug();
			link.innerHTML = 'Hide debug';
		}
		debug = !debug
	}

</script>
</body>
</html>
