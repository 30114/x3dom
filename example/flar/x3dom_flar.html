<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">	
    <head>
        <title>Yeah</title>
        <link rel="stylesheet" type="text/css" href="../x3dom.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>  
        <script type="text/javascript">
        	$(document).ready(function () {

        		$('#x3div').hide();
        		
        		$('#enable').click(function () {
        			$('#x3dom-x3d-canvasdiv').toggle();
        		});
        	});
            
            function set_marker_matrix_pv3d(mat)
            {	
            	var m = '';
            	m += mat.n11+' ';
            	m += mat.n12+' ';
            	m += -mat.n13+' ';
            	m += mat.n14+' ';
            	m += mat.n21+' ';
            	m += mat.n22+' ';
            	m += -mat.n23+' ';
            	m += mat.n24+' ';
            	m += -mat.n31+' ';
            	m += -mat.n32+' ';
            	m += mat.n33+' ';
            	m += -mat.n34+' ';
            	m += '0 0 0 1'
            	
            	document.getElementsByTagName("MatrixTransform")[0].setAttribute("matrix", m);
            }
            
            function enablex3dom()
            {
            	$('#x3div').show();
            }
        </script>
    </head>
    <body>
    	<h1>Augmented Reality with X3DOM and FLARToolkit</h1>

		<p>
			We are using Flash based FLARToolkit / FLARManager for marker tracking and X3DOM for 3D rendering. Please print out this marker: <a href='resources/flar/patterns/patt001.png'>patt001.png</a> and point it to the camera.
		</p>
    	<div id="flartracker" style="position:absolute; z-index:-100;">
			<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" name="SimpleCube" width="640" height="480" align="middle" id="x3domflar">
				<param name="allowScriptAccess" value="always" />
				<param name="allowFullScreen" value="false" />
				<param name="movie" value="x3domflar.swf" /><param name="quality" value="high" /><param name="bgcolor" value="#808080" />	
    			<embed src="x3domflar.swf" quality="high" bgcolor="#808080" width="640" height="480" name="x3domflar" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer_de" />
			</object>
		</div>
		
		<div id='x3div'>
		<x3d id='x3d' showStat="false" showLog="false" x="0px" y="0px" width="640px" height="480px" altImg="helloX3D-alt.png">
			<scene>
				<viewpoint fieldOfView='0.60' position='0 0 0'></viewpoint>
				<background transparency="1" skyColor='0 0 0'></background>
				
				<matrixtransform>
					<transform def='universe' translation='0 90 0' scale='100 100 100'>
						<transform def='earth' rotation='1 0 0 -1.57'>
							<shape>
								<appearance>
									<imageTexture url='"http://veimages.gsfc.nasa.gov/2430/land_ocean_ice_2048.jpg"'>
									</imageTexture>
								</appearance>
								<sphere lit='false'>
								</sphere>
							</shape>
						</transform>
						
						<transform def='clouds' rotation='1 0 0 -1.57' scale='1.1 1.1 1.1'>
							<shape>
								<appearance>
									<imageTexture url='"http://www.barnabu.co.uk/files/clouds/cloudimage.png"'>
									</imageTexture>
								</appearance>
								<sphere solid='false' lit='false'>
								</sphere>
							</shape>
						</transform>
					</transform>
				</matrixtransform>
				
				<!--<orientationInterpolator def='oi' keyValue='0 0 1 0, 0 0 1 3.14, 0 0 1 6.28' key='0 0.5 1'></orientationInterpolator>
				<route fromNode='oi' fromField='value_changed' toNode='universe' toField='set_rotation'></route>
			
				<timesensor def='t' cycleinterval='100' loop='TRUE'></timesensor>
				<route fromNode='t' fromField='fraction_changed' toNode='oi' toField='set_fraction'></route>-->
			</scene>
		</x3d>
		</div>
		
		<script type="text/javascript" src="../x3dom.js"></script>
   </body>
</html>
