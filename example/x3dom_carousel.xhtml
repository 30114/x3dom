<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<title>X3DOM example</title>
        <link rel="stylesheet" type="text/css" href="http://www.x3dom.org/x3dom/release/x3dom.css" />
		<script type='text/javascript' src='http://www.x3dom.org/x3dom/release/x3dom.js'></script>
        <script type='text/javascript' src="http://code.jquery.com/jquery-latest.min.js"></script>

		<style>
		body {
			margin: 10px;
			padding: 10px;
			width: 100%;
			height: 100%;
			font-size: 12pt;
			background-color:#000;
			color:#666;
		}
		h1, h2 {
			color:#000;
			font-size:2.7em;
			background-color:#FFF;
			display:inline;			
		}
		
		p {
			font-size: 0.9em;	
		}
		
		pre {
			padding:0;
			margin:0;
			text-indent:0;
			left:0;	
			font-size:0.8em;
		}
		
		h3, h4 {
			display:inline;	
			color:#000;
		}
		
		#info {
			padding:50px;	
		}
		
		#wrapper {
		}
		#toggler:hover {
			background-color:blue;
		}
	
		solarsys_scene {
			width:800px;
			height:600px;	
		}
		
		#container {
			width:100%;
			overflow:hidden;
			background-image:url('texture/solarSystem/starsbg.png');
		}
		
		#iframe_container {
			position:absolute;
			top:80px;
			right:10px;
			z-index:500;
			-moz-border-radius: 0.5em;
			-webkit-border-radius: 0.5em;
			border-radius: 0.5em;
			box-shadow:4px 4px 4px 4px #666;
			padding:10px;
			background-color:#FFF;
			opacity:0.8;
			filter: alpha(opacity=80);
			width:500px;
			height:500px;
			padding:20px;
			
		}
		
		#meinInfoFrame {
			position:relative;
			width:100%;
			height:100%;
		    zoom: 0.95;
	   		-moz-transform: scale(0.95);
	   	 	-moz-transform-origin: 0 0;
	   	 	-webkit-transform: scale(0.95);
		    -webkit-transform-origin: 0 0;
		}
		
		</style>

	

	</head>
       
<body id="main">

    <h1>Planets <br/>of the solar system</h1>
    
    
    
  <div id="wrapper">
	<div id="container">
    
	<X3D id="solarsys_scene" xmlns="http://www.web3d.org/specifications/x3d-namespace" showStat="false" showLog="false" width="600px" height="400px" style="background-color:#000">
			<Scene>
                <Transform id='trafo'>
                </Transform>
				<Background skyColor='0 0 0' backUrl="http://ocebackgrounds.files.wordpress.com/2008/06/picture-3.png" />
                <NavigationInfo type='none' />
				<Viewpoint position="0 1 10" orientation="0 0 1 -0.2" />
			</Scene>
		</X3D>
	</div>  
  </div>

    <div id="iframe_container">
    		<div id="info">
            	<h3>Carousell menu: the virtual planetarium</h3>
                <p>A simple effect, driven by a powerful engine: With X3DOM an JavaScript you can
                run an develop beautyful effects and a strong integration of 2D and 3D elements.</p>
                <p>&nbsp;</p>
                <h4>Navigation through mouse over</h4>
                <p>Moving the mouse over the planets causes the system to rotate. Choose one of the plantes and click on it for additional information.</p>
                <p>&nbsp;</p>
                <h4>Use JavaScript events</h4>
                <p>
                <pre><![CDATA[
addEventListener("mousemove", doSometingonMouseMove, true); 
addEventListener("mouseout", doSometingonMouseOut, true); 
                ]]>
                </pre>
                Neither HTML nor X3DOM declaration, the event and listener model of JavaScript works on both likewise.</p>
                
            </div>
            <div style="overflow:hidden;">
			<iframe id="meinInfoFrame" 
            	frameborder="0" src=""> 
	        </iframe>
            </div>
            <a id="outlink" href=""></a>

    </div>

    
	<script type="text/javascript"><![CDATA[
    var pos = 0;
    var inc = 0;
	var state=true;
    
    function handleOrientation(event) {
		state = true;
        var x3d = document.getElementById('solarsys_scene');
        var w = parseInt(x3d.getAttribute("width"));
        pos = (event.layerX - (w / 2)) / (w / 2);
        pos = (pos < -1) ? -1 : ( (pos > 1) ? 1 : pos);
        event.cancelBubble = true;
        event.stopPropagation();
    }
	
	function handleOrientationOut(event) {
		state = false;
	}
    
    function tick() {
		if (state) {
	        var d = document.getElementById("trafo");
	        inc += (pos / 50);  // scale down a bit
		}
    
	    d.setAttribute('rotation', '0 1 0 ' + 3.14159265*inc);
    }
    
    function showValue(val, link) {
		var outlink = document.getElementById('outlink');
        //document.getElementById('ausgabe').style.color = val;
        //document.getElementById('ausgabe').innerHTML = val;
        
        var frame = document.getElementById("meinInfoFrame");
		
		document.getElementById('info').style.display = "none";
		

		outlink.href = link;
		outlink.innerHTML = link.slice(0, link.length-4);
		
        frame.src = link;
    }
    
    function createScene() {
        var N = 8, radius = 4;
        
        var textures = ["texture/solarSystem/Mercury.jpg",
                        "texture/solarSystem/Venus.jpg",
                        "texture/solarSystem/Earth.jpg",
                        "texture/solarSystem/Mars.jpg",
                        "texture/solarSystem/Jupiter.jpg",
                        "texture/solarSystem/Saturn.jpg",
                        "texture/solarSystem/Uranus.jpg",
                        "texture/solarSystem/Neptune.jpg"];
        
        var planets = ["http://en.wikipedia.org/wiki/Mercury_(planet)#top",
                       "http://en.wikipedia.org/wiki/Venus_(planet)#top",
                       "http://en.wikipedia.org/wiki/Earth#top",
                       "http://en.wikipedia.org/wiki/Mars_(planet)#top",
                       "http://en.wikipedia.org/wiki/Jupiter_(planet)#top",
                       "http://en.wikipedia.org/wiki/Saturn_(planet)#top",
                       "http://en.wikipedia.org/wiki/Uranus_(planet)#top",
                       "http://en.wikipedia.org/wiki/Neptune_(planet)#top"];
        
        for (var i=0; i<N; i++) {
            var phi = i * (2 * Math.PI / N);
            var x = radius * Math.cos(phi);
            var y = 0;
            var z = -radius * Math.sin(phi);
            
            var t = document.createElement('Transform');
            t.setAttribute("translation", x + " " + y + " " + z);
            t.setAttribute("scale", ".75 .75 .75");
            t.setAttribute("onclick", "showValue(" + i + ", '" + planets[i] + "')");
			
			
		
            
            var s = document.createElement('Shape');
            t.appendChild(s);
            
            var a = document.createElement('Appearance');
            s.appendChild(a);
            
            var m = document.createElement('ImageTexture');
            m.setAttribute("url", textures[i]);
            a.appendChild(m);
            
            var b = document.createElement('Sphere');
            s.appendChild(b);
            
            var ot = document.getElementById('trafo');
            ot.appendChild(t);
        }
    }
    
    document.onload = function() {
        document.getElementById('solarsys_scene').addEventListener("mousemove", handleOrientation, true);
        document.getElementById('solarsys_scene').addEventListener("mouseout", handleOrientationOut, true);
        
        createScene();
        
        setInterval( function() { tick(); }, 40 );
    };
	]]></script>
	
	
</body>
</html>
