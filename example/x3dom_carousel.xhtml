<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<title>X3DOM example</title>
        <link rel="stylesheet" type="text/css" href="x3dom.css" />
	</head>
       
<body>

    <h1>Carousel menu showing some information about the planets of the solar system</h1>
	<p> 
		<X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" 
             id="elem" showStat="false" showLog="false" width="500px" height="400px">
			<Scene>
                <Transform id='trafo'>
                </Transform>
				<Background skyColor='0 0 0' backUrl="texture/solarSystem/Sun.jpg" />
                <NavigationInfo type='none' />
				<Viewpoint position="0 2 12" orientation="1 0 0 -0.2" />
			</Scene>
		</X3D>
	</p>
    
    <p>
    <iframe id="meinInfoFrame" width="800" height="400" marginheight="5" marginwidth="5" 
        frameborder="0" src="http://en.wikipedia.org/wiki/Solar_System"> 
    </iframe>
    <!--
    <div id="ausgabe" style="background-color: grey; color:yellow; border: black solid 1px; padding: 2px; font-size:14pt;"> Click the planets to get some more information </div>
	-->
    </p>
    
	<script type="text/javascript"><![CDATA[
    var pos = 0;
    var inc = 0;
    
    function handleOrientation(event) {
        var x3d = document.getElementById('elem');
        var w = parseInt(x3d.getAttribute("width"));
        pos = (event.layerX - (w / 2)) / (w / 2);
        pos = (pos < -1) ? -1 : ( (pos > 1) ? 1 : pos);
        event.cancelBubble = true;
    }
    
    function tick() {
        var d = document.getElementById("trafo");
        inc += (pos / 50);  // scale down a bit
        d.setAttribute('rotation', '0 1 0 ' + 3.14159265*inc);
    }
    
    function showValue(val, link) {
        //document.getElementById('ausgabe').style.color = val;
        //document.getElementById('ausgabe').innerHTML = val;
        
        var frame = document.getElementById("meinInfoFrame");
        frame.src = link;
    }
    
    function createScene() {
        var N = 8, radius = 4;
        
        var textures = ["texture/solarSystem/Mercury.jpg",
                        "texture/solarSystem/Venus.jpg",
                        "texture/solarSystem/Earth.jpg",
                        "texture/solarSystem/Mars.jpg",
                        "texture/solarSystem/Jupiter.jpg",
                        "texture/solarSystem/Saturn.jpg",
                        "texture/solarSystem/Uranus.jpg",
                        "texture/solarSystem/Neptune.jpg"];
        
        var planets = ["http://en.wikipedia.org/wiki/Mercury_(planet)",
                       "http://en.wikipedia.org/wiki/Venus_(planet)",
                       "http://en.wikipedia.org/wiki/Earth",
                       "http://en.wikipedia.org/wiki/Mars_(planet)",
                       "http://en.wikipedia.org/wiki/Jupiter_(planet)",
                       "http://en.wikipedia.org/wiki/Saturn_(planet)",
                       "http://en.wikipedia.org/wiki/Uranus_(planet)",
                       "http://en.wikipedia.org/wiki/Neptune_(planet)"];
        
        for (var i=0; i<N; i++) {
            var phi = i * (2 * Math.PI / N);
            var x = radius * Math.cos(phi);
            var y = 0;
            var z = -radius * Math.sin(phi);
            
            var t = document.createElement('Transform');
            t.setAttribute("translation", x + " " + y + " " + z);
            t.setAttribute("scale", ".75 .75 .75");
            t.setAttribute("onclick", "showValue(" + i + ", '" + planets[i] + "')");
            
            var s = document.createElement('Shape');
            t.appendChild(s);
            
            var a = document.createElement('Appearance');
            s.appendChild(a);
            
            var m = document.createElement('ImageTexture');
            m.setAttribute("url", textures[i]);
            a.appendChild(m);
            
            var b = document.createElement('Sphere');
            s.appendChild(b);
            
            var ot = document.getElementById('trafo');
            ot.appendChild(t);
        }
    }
    
    document.onload = function() {
        document.getElementById('elem').addEventListener("mousemove", handleOrientation, true);
        
        createScene();
        
        setInterval( function() { tick(); }, 40 );
    };
	]]></script>
	
	<script type="text/javascript" src="x3dom.js"></script>
	
</body>
</html>
