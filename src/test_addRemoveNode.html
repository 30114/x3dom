<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<title>Simple WebGL example</title>
		<style>
		p.case { clear: both; border-top: 1px solid #888; }
		</style>
        <link rel="stylesheet" type="text/css" href="x3dom.css" />
	</head>
       
<body>

    <h1>x3dom simple example</h1>
	
	<p class="case"> 
		<x3d id="boxes" showStat="true" showLog="true" x="0px" y="0px" width="400px" height="300px">
			<scene>
				<background DEF='bgnd' transparency='0' skyColor='0.2 0.7 0.4' ></background>
				<transform id="root" translation="0 0 0">
					<shape>
						<box ></box>
					</shape>
				</transform> 
			</scene>
		</x3d>
	</p>
	
	<script type="text/javascript">
	    
    function addNode()
    {
		x = Math.random() * 6 - 3;
		y = Math.random() * 6 - 3;
		z = Math.random() * 6 - 3;
	
		s0 = Math.random() + 0.5;
		s1 = Math.random() + 0.5;
		s2 = Math.random() + 0.5;
		
        var t = document.createElement('Transform');
        t.setAttribute("translation", x + " " + y + " " + z );
        t.setAttribute("scale", s0 + " " + s1 + " " + s2 );
        var s = document.createElement('Shape');
        t.appendChild(s);
        var b = document.createElement('Box');
        s.appendChild(b);
        
        var ot = document.getElementById('root');
        ot.appendChild(t);
        
        return false;
    };
    
    function removeNode()
    {
        var ot = document.getElementById('root');
        for (var i = 0; i < ot.childNodes.length; i++) {
        	// check if we have a real X3DOM Node; not just e.g. a Text-tag
        	if (ot.childNodes[i].nodeType === Node.ELEMENT_NODE) {
        		ot.removeChild(ot.childNodes[i]);
  				break;
  			}
  		}
        
        return false;
    };
    
	</script>
	
	<p class="case"> &nbsp; 
	Dynamic childtree update
	<input type="button" value="Add Child" 		onclick="window.addNode();" />
	<input type="button" value="Remove Child" 	onclick="window.removeNode();" />
	</p>
	
	<script type="text/javascript" src="x3dmain.js"></script>
    <script type="text/javascript" src="debug.js"></script>
	<script type="text/javascript" src="gfx_webgl.js"></script>
	<script type="text/javascript" src="x3d.js"></script>
	<script type="text/javascript" src="fields.js"></script>

</body>
</html>
